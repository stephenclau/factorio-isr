# Factorio ISR Patterns - AGPL-3.0 or Commercial
# Copyright (c) 2025 Stephen C Lau




# Factorio ISR - Multi-Server Configuration
# Place this file in your project root directory
#
# Server tags must be:
#   - Lowercase only
#   - Alphanumeric with hyphens
#   - 1-16 characters max
#   - Examples: prod, stg, dev, lh, pvp-arena, co-op

servers:
  # Production server - main 24/7 gameplay
  tag:
    name: ""
    description: ""
    rcon_host: # Docker container name or IP e.g. localhost, 812.180.18.1, 192.168.1.220, factorio-container-name-from-docker-compose.yml
    rcon_port: 27015                # RCON port
    rcon_password:  #you can hardcode it here, but i recommend secrets
    event_channel_id:   # Discord channel ID for events for THIS server.
    stats_interval: 300             # Post stat card every 5 minutes
    # Performance monitoring (NEW)
    collect_ups: true
    collect_evolution: true
    enable_alerts: true
    alert_check_interval: 60  # Check every 60 seconds
    alert_samples_required: 3  # 3 consecutive bad samples
    ups_warning_threshold: 55.0
    ups_recovery_threshold: 58.0
    ups_ema_alpha: 0.2
    alert_cooldown: 300  # 5 min between alerts
    
  # Staging server - testing before production deployment
  # stg:
  #   name: "Staging"
  #   description: "Testing environment"
  #   rcon_host: "factorio-staging"
  #   rcon_port: 27015
  #   rcon_password: "your-staging-secret-here"
  #   event_channel_id: 987654321098765432
  #   stats_interval: 600             # Post stats every 10 minutes

  # # Los Hermanos - creative/experimental world
  # lh:
  #   name: "Los Hermanos"
  #   description: "Creative testing world"
  #   rcon_host: "factorio-lh"
  #   rcon_port: 27015
  #   rcon_password: "your-lh-secret-here"
  #   event_channel_id: 555555555555555555
  #   stats_interval: 300

  # Development server (optional)
  # dev:
  #   name: "Development"
  #   description: "Mod testing and development"
  #   rcon_host: "localhost"
  #   rcon_port: 27015
  #   rcon_password: "dev-password"
  #   event_channel_id: 111111111111111111
  #   stats_interval: 900  # 15 minutes

# Configuration Notes:
# 
# - `tag`: Used in commands like /factorio connect prod
# - `name`: Human-readable name shown in Discord
# - `description`: Optional tooltip shown in server list
# - `rcon_host`: Hostname or IP of Factorio server
# - `rcon_port`: RCON port (default: 27015)
# - `rcon_password`: RCON password from server-settings.json
# - `event_channel_id`: Discord channel ID for this server's events (optional)
# - `stats_interval`: How often to post stats in seconds (default: 300)
#
# To get Discord channel ID:
# 1. Enable Developer Mode in Discord (User Settings > Advanced)
# 2. Right-click channel > Copy ID
